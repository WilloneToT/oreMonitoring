{"slots":{"0":{"name":"container_silver","type":{"events":[],"methods":[]}},"1":{"name":"container_nickel","type":{"events":[],"methods":[]}},"2":{"name":"container_sulfur","type":{"events":[],"methods":[]}},"3":{"name":"container_lithium","type":{"events":[],"methods":[]}},"4":{"name":"container_acantite","type":{"events":[],"methods":[]}},"5":{"name":"container_garniertite","type":{"events":[],"methods":[]}},"6":{"name":"container_pyrite","type":{"events":[],"methods":[]}},"7":{"name":"container_petalite","type":{"events":[],"methods":[]}},"8":{"name":"screen","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"unit.hide()\nfunction round(num, dec)\n  local mult = 10^(dec or 0)\n  return math.floor(num * mult + 0.5) / mult\nend\n\nfunction converUnit(oreStock)\n     printL = [[L]]\n     printKl = [[Kl]]\n     printMl = [[Ml]]\n     converToL = oreStock\n     converToKl = math.floor(oreStock/1000)\n     converToMl = oreStock/1000000\n    if oreStock <= 9999 then return\n         converToL ..printL\n         elseif oreStock >= 10000 and oreStock < 1000000 then return\n         converToKl ..printKl\n         elseif oreStock >= 1000000 then return\n         round(converToMl, 2) ..printMl\n        end\n    end\n\nfunction messagePrint(a, b, c, d)\n\tmessageOn = [[ 0;]]\n     messageOff = [[ 1;]]  \n    if a > 26 and b >26 and c >26 and d >26 then return\n        \tmessageOn\n        else return\n        \tmessageOff\n        end\n    end\n    \n\nfunction resourcesStatus(percent)        \n    if percent <= 25 then return [[\n\t   \tbackground: rgb(27,0,0);\n\t\tbackground: linear-gradient(90deg, rgba(27,0,0,1) 0%, rgba(129,23,23,0.5) 25%, rgba(251,0,0,0.5) 100%);\n        ]]\n       elseif percent > 25 and percent < 60 then return [[\n\t\tbackground: rgb(27,0,0);\n\t\tbackground: linear-gradient(90deg, rgba(27,0,0,1) 0%, rgba(129,101,23,1) 25%, rgba(251,202,0,1) 100%)\n        ]]\n        else return [[\n\t\tbackground: rgb(5,27,0);\n\t\tbackground: linear-gradient(90deg, rgba(5,27,0,1) 0%, rgba(38,129,23,1) 25%, rgba(34,251,0,1) 100%);\n        ]]\n        end\n    end\n\nlocal coma = \", \"\n\nfunction silverStock(percent)\n    \n    local silverType = oreType[1] ..coma\n    local silverOk = \"\"\n    \tif percent <=25 then return\n        \tsilverType\n        else return\n        \tsilverOk     \t\n        end\n     end\n\nfunction nickelStock(percent)\n    local nickelType = oreType[2] ..coma\n    local nickelOk = \"\"\n    \tif percent <=25 then return\n        \tnickelType      \n        else return\n        \tnickelOk\n        end\n     end\n\nfunction sulfurStock(percent)\n    local sulfurType = oreType[3] ..coma\n    local sulfurOk = \"\"\n    \tif percent <=25 then return\n        \tsulfurType\n        else return\n        \tsulfurOk\n        end\n     end\n\nfunction lithiumStock(percent)\n    local lithiumType = oreType[4]\n    local lithiumOk = \"\"\n    \tif percent <=25 then return     \t\n        \tlithiumType\n        else return\n        \tlithiumOk\t\n        end\n     end\n\noreType = {[1]=\"silver\",[2]=\"nickel\",[3]=\"sulfur\",[4]=\"lithium\",[5]=\"acantite\",[6]=\"garniertite\",[7]=\"pyrite\",[8]=\"petalite\"}\noreWeight = {[1]=10.49,[2]=8.91,[3]=1.82,[4]=0.53,[5]=7.20,[6]=2.60,[7]=5.01,[8]=2.41}\n\nlocal maxWitdh = 46.5\n\nmaxContainerPure = 576000 --export: Max Tier1 Container Volume\nmaxContainerOre = 576000 --export: Max Tier1 Container Volume\n\n-- Container_silver\nlocal containerMass_silver = math.ceil(container_silver.getItemsMass()/oreWeight[1])\nlocal percentsilver = math.ceil((containerMass_silver/maxContainerPure)*100)\nlocal silverStatus = resourcesStatus(percentsilver)\nlocal silverFactor = maxWitdh/maxContainerPure\nlocal silverBarStatus = containerMass_silver*silverFactor\nlocal silverStockStatus = silverStock(percentsilver)\nlocal containerVolumesilver = converUnit(containerMass_silver) \n    \n-- Container_nickel\nlocal containerMass_nickel = math.ceil(container_nickel.getItemsMass()/oreWeight[2])\nlocal percentnickel = math.ceil((containerMass_nickel/maxContainerPure)*100)\nlocal nickelStatus = resourcesStatus(percentnickel)\nlocal nickelFactor = maxWitdh/maxContainerPure\nlocal nickelBarStatus = containerMass_nickel*nickelFactor\nlocal nickelStockStatus = nickelStock(percentnickel)\nlocal containerVolumenickel = converUnit(containerMass_nickel)\n    \n-- Container_sulfur\nlocal containerMass_sulfur = math.ceil(container_sulfur.getItemsMass()/oreWeight[3])\nlocal percentsulfur = math.ceil((containerMass_sulfur/maxContainerPure)*100)\nlocal sulfurStatus = resourcesStatus(percentsulfur)\nlocal sulfurFactor = maxWitdh/maxContainerPure\nlocal sulfurBarStatus = containerMass_sulfur*sulfurFactor\nlocal sulfurStockStatus = sulfurStock(percentsulfur)\nlocal containerVolumesulfur = converUnit(containerMass_sulfur)\n    \n-- Container_lithium\nlocal containerMass_lithium = math.ceil(container_lithium.getItemsMass()/oreWeight[4])\nlocal percentlithium = math.ceil((containerMass_lithium/maxContainerPure)*100)\nlocal lithiumStatus = resourcesStatus(percentlithium)\nlocal lithiumFactor = maxWitdh/maxContainerPure\nlocal lithiumBarStatus = containerMass_lithium*lithiumFactor\nlocal lithiumStockStatus = lithiumStock(percentlithium)\nlocal containerVolumelithium = converUnit(containerMass_lithium)\n\n-- Container_acantite\nlocal containerMass_acantite = math.ceil(container_acantite.getItemsMass()/oreWeight[5])\nlocal percentacantite = math.ceil((containerMass_acantite/maxContainerOre)*100)\nlocal acantiteStatus = resourcesStatus(percentacantite)\nlocal acantiteFactor = maxWitdh/maxContainerOre\nlocal acantiteBarStatus = containerMass_acantite*acantiteFactor\n--local acantiteStockStatus = acantiteStock(percentacantite)\nlocal containerVolumeacantite = converUnit(containerMass_acantite) \n    \n-- Container_garniertite\nlocal containerMass_garniertite = math.ceil(container_garniertite.getItemsMass()/oreWeight[6])\nlocal percentgarniertite = math.ceil((containerMass_garniertite/maxContainerOre)*100)\nlocal garniertiteStatus = resourcesStatus(percentgarniertite)\nlocal garniertiteFactor = maxWitdh/maxContainerOre\nlocal garniertiteBarStatus = containerMass_garniertite*garniertiteFactor\n--local garniertiteStockStatus = garniertiteStock(percentgarniertite)\nlocal containerVolumegarniertite = converUnit(containerMass_garniertite)\n    \n-- Container_pyrite\nlocal containerMass_pyrite = math.ceil(container_pyrite.getItemsMass()/oreWeight[7])\nlocal percentpyrite = math.ceil((containerMass_pyrite/maxContainerOre)*100)\nlocal pyriteStatus = resourcesStatus(percentpyrite)\nlocal pyriteFactor = maxWitdh/maxContainerOre\nlocal pyriteBarStatus = containerMass_pyrite*pyriteFactor\n--local pyriteStockStatus = pyriteStock(percentpyrite)\nlocal containerVolumepyrite = converUnit(containerMass_pyrite)\n    \n-- Container_petalite\nlocal containerMass_petalite = math.ceil(container_petalite.getItemsMass()/oreWeight[8])\nlocal percentpetalite = math.ceil((containerMass_petalite/maxContainerOre)*100)\nlocal petaliteStatus = resourcesStatus(percentpetalite)\nlocal petaliteFactor = maxWitdh/maxContainerOre\nlocal petaliteBarStatus = containerMass_petalite*petaliteFactor\n--local petaliteStockStatus = petaliteStock(percentpetalite)\nlocal containerVolumepetalite = converUnit(containerMass_petalite)\n\nmessage = messagePrint(percentsilver, percentnickel, percentsulfur, percentlithium)\n\nlocal view = [[\n<html>\n<head>\n</head>\n\n<style>\nem {\n\tfont-weight: bold;\n}\n\n.silver {\n\ttext-shadow: 0 0vw 0.11vw rgba(245, 245, 220, 0.8);\n\tcolor: rgba(245, 245, 220, 0.8);\n}\n.nickel {\n\ttext-shadow: 0 0vw 0.11vw rgba(17, 130, 19, 0.8);\n\tcolor: rgba(17, 130, 19, 0.8);\n}\n\n.sulfur {\n\ttext-shadow: 0 0vw 0.11vw rgba(250, 157, 80, 0.8);\n\tcolor: rgba(250, 157, 80, 0.8);\n}\n.lithium {\n\ttext-shadow: 0 0vw 0.11vw rgba(191, 63, 191, 0.8);\n\tcolor: rgba(191, 63, 191, 0.8);\n}\n\n.weak {\n\tanimation: faible 1s infinite alternate;\n}\n\n\nbody {\n\twidth:100%;\n\tbackground-color: rgba(0, 0, 0, 1);\n}\n\n.progress-bar {\n\toverflow: visible;\n\twhite-space: nowrap;\n\theight: 70%;\n\tbox-shadow: 0 0vw 0.2vw rgba(0, 0, 0, 0.8);\n}\n\n\t.progress-bar-silver {\n\t\twidth: ]].. silverBarStatus .. [[vw;\n\t\t]] .. silverStatus .. [[\n\t}\n\n\t.progress-bar-nickel {\n\t\twidth: ]].. nickelBarStatus ..[[vw;\n\t\t]] .. nickelStatus .. [[\n\t}\n\n\t.progress-bar-sulfur {\n\t\twidth: ]].. sulfurBarStatus ..[[vw;\n\t\t]] .. sulfurStatus .. [[\n\t}\n\n\t.progress-bar-lithium {\n\t\twidth: ]].. lithiumBarStatus ..[[vw;\n\t\t]] .. lithiumStatus .. [[\n\t}\n\n.progress-bar2 {\n\tfont-size: 2vw;\n\toverflow: visible;\n\twhite-space: nowrap;\n\theight: 30%;\n\tbox-shadow: 0 0vw 0.1vw rgba(0, 0, 0, 0.4);\n}\n\n\t.progress-bar-acantite {\n\t\twidth: ]].. acantiteBarStatus .. [[vw;\n\t\t]] .. acantiteStatus .. [[\n\t}\n\n\t.progress-bar-garniertite {\n\t\twidth: ]].. garniertiteBarStatus ..[[vw;\n\t\t]] .. garniertiteStatus .. [[\n\t}\n\n\t.progress-bar-pyrite {\n\t\twidth: ]].. pyriteBarStatus ..[[vw;\n\t\t]] .. pyriteStatus .. [[\n\t}\n\n\t.progress-bar-petalite {\n\t\twidth: ]].. petaliteBarStatus ..[[vw;\n\t\t]] .. petaliteStatus .. [[\n\t}\n\n /*Parent container*/\n\n.prime {\n\twitdh : auto;\n\tposition: absolute;\n\tleft: 2.58vw;\n\tanimation: show 1s ease-in;\n}\n\t.title h1 {\n\t\tfont-size: 8vw;\n\t\ttext-align: center;\n\t\tpadding: 0.51vw;\n}\n\t.container {\n\t\ttext-align: center;\n\t\twidth: 50vw;\n\t\tdisplay: grid;\n\t\tgrid-template-rows: 9vw;\n\t\tgrid-template-columns: 25.8vw 20.64vw 100%;\n\t\talign-items: center;\n\t\tpadding: 1vw;\n}\n\t\t.container_message {\n    \t\topacity:  ]] .. message.. [[ ;\n\t\t\ttext-align: center;\n\t\t\twidth: 100vw;\n\t\t\tdisplay: inherit flex;\n\t\t\talign-items: center;\n\t\t\tpadding-right: 2.58vw;\n\t\t\tpadding-top: 2.58vw;\n}\n\n/*Child container*/\n\t.span {\nposition: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n\n\t.item_container {\n\t\tjustify-self: auto;\n  \t\tpadding: 1.03vw;\n\t\theight: 100%;\n  \t\tfont-size: 3.5vw;\n\t\tposition: relative;\n\t\tvertical-align: middle;\n  \t\ttext-align: center;\t\t\n  \t\tcolor: white;\n\t}\n\n\t.item_container_silver {\n          background-color: rgba(245, 245, 220, 0.4);\n          border: 0.2vw solid rgba(245, 245, 220, 1);\n\t}\n\t.item_container_nickel {\n\t\tbackground-color: rgba(17, 130, 19, 0.4);\n\t\tborder: 0.2vw solid rgba(17, 130, 19, 1);\n\t}\n\t.item_container_sulfur {\n\t\tbackground-color: rgba(250, 157, 80, 0.4);\n\t\tborder: 0.2vw solid rgba(250, 157, 80, 1);\n\t}\n\t.item_container_lithium {\n\t\tbackground-color: rgba(191, 63, 191, 0.4);\n\t\tborder: 0.2vw solid rgba(191, 63, 191, 1);\n\t}\n\n\t\t.item_container_silver--1 {\n\t\t\tbackground-color: rgba(0, 0, 0, 0.4);\n\t\t}\n\t\t.item_container_nickel--1 {\n\t\t\tbackground-color: rgba(0, 0, 0, 0.4);\n\t\t}\n\t\t.item_container_sulfur--1 {\n\t\t\tbackground-color: rgba(0, 0, 0, 0.4);\n\t\t}\n\t\t.item_container_lithium--1 {\n\t\t\tbackground-color: rgba(0, 0, 0, 0.4);\n\t\t\tz-index: 2;\n\t\t}\n\n\t\t.infos_title {\n\t\t\tposition: relative;\n\t\t\tleft: 34.83vw;\n\t\t\tcolor: red;\n\t\t\tmargin-bottom: 3.09vw;\n\t\t\twidth: 25.8vw;\n\t\t\tfont-weight: bold;\n\t\t\tborder-bottom: 0.31vw solid red;\n\t\t\tfont-size: 3.92vw;\n\t\t\tanimation: urgent 2s infinite alternate;\n\t\t}\n\t\t.item_container_message {\n\t\t\tjustify-self: center;\n\t\t\talign-items: center;\n  \t\t\tfont-size: 3.09vw;\n  \t\t\ttext-align: center;\n  \t\t\tcolor: white;\n\t\t\tpadding-right: 0.16vw;\n\t\t}\n\n@keyframes show {\n\t0% {\n\t\topacity: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n}\n\n@keyframes faible {\n\t0% {\n\t\ttransform: scale(0.95);\n\t}\n\t100% {\n\t\ttransform: scale(1);\n\t}\n}\n\n@keyframes urgent {\n\t0% {\n\t\ttransform: scale(1.25);\n\t}\n\t100% {\n\t\ttransform: scale(1.5);\n \t}\n}\n\n</style>\n\n<!-- CONTAINER -->\n<header>\n\t<div class=\"title\">\n\t\t<h1>Tier 3 Pure</h1>\n\t</div>\n</header>\n\n<body>\n<div class=\"prime\">\n<div class=\"container\">\n\t<div class=\"container container__block--1\">\n\t\t<div class=\"item_container item_container_silver\">\n          \t<span class=\"span\">]].. oreType[1] ..[[</span>\n\t\t</div>\n\t\t<div class=\"item_container item_container_silver\">\n        \t<span class=\"span\">]] .. containerVolumesilver .. [[</span>\n\t\t</div>\n\t\t<div class=\"item_container item_container_silver item_container_silver--1\">\n\t\t\t<div class=\"progress-bar progress-bar-silver\"> \n\t\t\t\t]] .. percentsilver .. [[ %\n\t\t\t</div>\n\t\t\t<div class=\"progress-bar2 progress-bar-acantite\"> \n\t\t\t\t]] .. containerVolumeacantite .. [[\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=\"container\">\n\t<div class=\"container container__block--2\">\n\t\t<div class=\"item_container item_container_nickel\">\n          \t<span class=\"span\">]].. oreType[2] ..[[</span>\n\t\t</div>\n\t\t<div class=\"item_container item_container_nickel\">\n        \t<span class=\"span\">]] .. containerVolumenickel .. [[</span>\n\t\t</div>\n\t\t<div class=\"item_container item_container_nickel item_container_nickel--1\">\n\t\t   \t<div class=\"progress-bar progress-bar-nickel\"> \n\t\t\t\t]] .. percentnickel .. [[ %\n\t\t\t</div>\n\t\t\t<div class=\"progress-bar2 progress-bar-garniertite\"> \n\t\t\t\t]] .. containerVolumegarniertite .. [[\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=\"container\">\n\t<div class=\"container container__block--3\">\n\t\t<div class=\"item_container item_container_sulfur\">\n          \t<span class=\"span\">]].. oreType[3] ..[[</span>\n\t\t</div>\n\t\t<div class=\"item_container item_container_sulfur\">\n        \t<span class=\"span\">]] .. containerVolumesulfur .. [[</span>\n\t\t</div>\n\t\t<div class=\"item_container item_container_sulfur item_container_sulfur--1\">\n\t\t   \t<div class=\"progress-bar progress-bar-sulfur\"> \n\t\t\t\t]] .. percentsulfur .. [[ %\n\t\t\t</div>\n\t\t\t<div class=\"progress-bar2 progress-bar-pyrite\"> \n\t\t\t\t]] .. containerVolumepyrite .. [[\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=\"container\">\n\t<div class=\"container container__block--4\">\n\t\t<div class=\"item_container item_container_lithium\">\n          \t<span class=\"span\">]].. oreType[4] ..[[</span>\n\t\t</div>\n\t\t<div class=\"item_container item_container_lithium\">\n        \t<span class=\"span\">]] .. containerVolumelithium .. [[</span>\n\t\t</div>\n\t\t<div class=\"item_container item_container_lithium item_container_lithium--1\">\n\t\t   \t<div class=\"progress-bar progress-bar-lithium\"> \n\t\t\t\t]] .. percentlithium .. [[ %\n\t\t\t</div>\n\t\t\t<div class=\"progress-bar2 progress-bar-petalite\"> \n\t\t\t\t]] .. containerVolumepetalite .. [[\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class=\"container_message\">\n\t<div class=\"item_container\">\n\t\t<div class=\"infos_title\">\n\t\t\tALERT\n\t\t</div>\n\n\t\t<div class=\"item_container_message\">\n\t\t\t<div class=\"infos_message\">\n\t\t\t\t<div class=\"weak\">\n\t\t\t\tLow stock of \n\t\t\t\t<em class=\"silver\">]].. silverStockStatus ..[[</em>\n\t\t\t\t<em class=\"nickel\">]].. nickelStockStatus ..[[</em>\n\t\t\t\t<em class=\"sulfur\">]].. sulfurStockStatus ..[[</em>\n\t\t\t\t<em class=\"lithium\">]].. lithiumStockStatus ..[[</em>\n\t\t\t\t<br>\n\t\t\t\tMiners have to work !\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n</body>\n</html>\n]]\n\nscreen.setHTML(view)","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"0"}],"methods":[],"events":[]}